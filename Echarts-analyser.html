<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyseur complet ECharts - Fonctions et Modules</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        h1 {
            color: var(--dark-color);
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .upload-section {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .upload-area {
            border: 2px dashed #bdc3c7;
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: #f8f9fa;
        }
        
        .upload-area.dragover {
            border-color: var(--primary-color);
            background-color: #e8f4fc;
        }
        
        .upload-icon {
            font-size: 48px;
            color: #bdc3c7;
            margin-bottom: 15px;
        }
        
        .file-input {
            display: none;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
        }
        
        .btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background-color: #95a5a6;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .results {
            margin-top: 30px;
        }
        
        .summary-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat {
            text-align: center;
            padding: 15px;
            background-color: var(--light-color);
            border-radius: var(--border-radius);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .file-results {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .file-result {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
        }
        
        .file-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .file-name {
            font-weight: bold;
            color: var(--dark-color);
            word-break: break-all;
        }
        
        .function-count {
            background-color: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .module-count {
            background-color: var(--success-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-left: 8px;
        }
        
        .function-list, .module-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .function-item, .module-item {
            padding: 10px;
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .function-item {
            border-left: 4px solid var(--primary-color);
        }
        
        .module-item {
            border-left: 4px solid var(--success-color);
        }
        
        .function-item.used, .module-item.used {
            border-left-color: var(--success-color);
        }
        
        .function-item.unused, .module-item.unused {
            border-left-color: #bdc3c7;
            opacity: 0.6;
        }
        
        .error {
            color: var(--danger-color);
            background-color: #fadbd8;
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 10px 0;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        .tab.active {
            border-bottom-color: var(--primary-color);
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .search-box {
            margin-bottom: 15px;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }
        
        .legend {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .legend-color.function {
            background-color: var(--primary-color);
        }
        
        .legend-color.module {
            background-color: var(--success-color);
        }
        
        .legend-color.used {
            background-color: var(--success-color);
        }
        
        .legend-color.unused {
            background-color: #bdc3c7;
        }
        
        .section-title {
            margin: 20px 0 10px 0;
            color: var(--dark-color);
            font-size: 1.2rem;
        }
        
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .module-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid var(--success-color);
        }
        
        .module-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .module-name {
            font-weight: bold;
            color: var(--dark-color);
        }
        
        .module-count {
            background-color: var(--success-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        @media (max-width: 768px) {
            .stats {
                grid-template-columns: 1fr 1fr;
            }
            
            .function-list, .module-list {
                grid-template-columns: 1fr;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Analyseur complet ECharts</h1>
            <p class="subtitle">D√©tecte les fonctions ET les modules ECharts utilis√©s dans vos fichiers JavaScript</p>
        </header>
        
        <div class="upload-section">
            <h2>S√©lectionnez vos fichiers JavaScript</h2>
            <p>Glissez-d√©posez vos fichiers ou cliquez pour parcourir</p>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üìÅ</div>
                <p>Glissez-d√©posez vos fichiers JavaScript ici</p>
                <p>ou</p>
                <button class="btn" id="browseBtn">Parcourir les fichiers</button>
                <input type="file" id="fileInput" class="file-input" multiple accept=".js">
            </div>
            
            <div id="fileList"></div>
            
            <div class="controls">
                <button class="btn" id="analyzeBtn">
                    <span class="btn-icon">üîç</span>
                    Analyser les fichiers
                </button>
                <button class="btn btn-secondary" id="resetBtn">
                    <span class="btn-icon">üîÑ</span>
                    R√©initialiser
                </button>
            </div>
        </div>
        
        <div class="loading" id="loadingIndicator">
            <div class="spinner"></div>
            <p>Analyse en cours... Cette op√©ration peut prendre quelques minutes</p>
        </div>
        
        <div id="results" class="results" style="display: none;">
            <div class="tabs">
                <div class="tab active" data-tab="summary">R√©sum√©</div>
                <div class="tab" data-tab="files">Fichiers analys√©s</div>
                <div class="tab" data-tab="all-functions">Toutes les fonctions</div>
                <div class="tab" data-tab="all-modules">Tous les modules</div>
                <div class="tab" data-tab="module-usage">Utilisation par module</div>
            </div>
            
            <div class="tab-content active" id="summary-tab">
                <div class="summary-card">
                    <h2>R√©sum√© de l'analyse</h2>
                    <div class="stats" id="summaryStats"></div>
                </div>
                
                <div class="summary-card">
                    <h2>Fonctions les plus utilis√©es</h2>
                    <div id="topFunctions"></div>
                </div>
                
                <div class="summary-card">
                    <h2>Modules les plus utilis√©s</h2>
                    <div id="topModules"></div>
                </div>
            </div>
            
            <div class="tab-content" id="files-tab">
                <div class="search-box">
                    <input type="text" class="search-input" id="fileSearch" placeholder="Rechercher un fichier...">
                </div>
                <div class="file-results" id="fileResults"></div>
            </div>
            
            <div class="tab-content" id="all-functions-tab">
                <div class="search-box">
                    <input type="text" class="search-input" id="functionSearch" placeholder="Rechercher une fonction...">
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color function"></div>
                        <span>Fonction</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color used"></div>
                        <span>Utilis√©e</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color unused"></div>
                        <span>Non utilis√©e</span>
                    </div>
                </div>
                <div class="function-list" id="allFunctionsList"></div>
            </div>
            
            <div class="tab-content" id="all-modules-tab">
                <div class="search-box">
                    <input type="text" class="search-input" id="moduleSearch" placeholder="Rechercher un module...">
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color module"></div>
                        <span>Module</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color used"></div>
                        <span>Utilis√©</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color unused"></div>
                        <span>Non utilis√©</span>
                    </div>
                </div>
                <div class="module-list" id="allModulesList"></div>
            </div>
            
            <div class="tab-content" id="module-usage-tab">
                <div class="search-box">
                    <input type="text" class="search-input" id="moduleUsageSearch" placeholder="Rechercher un module...">
                </div>
                <div id="moduleUsageResults"></div>
            </div>
        </div>
    </div>

    <script>
        // Liste exhaustive de toutes les fonctions ECharts
        const allEChartsFunctions = [
            // M√©thodes d'instance
            'init', 'setOption', 'getOption', 'resize', 'dispatchAction', 
            'on', 'off', 'getDataURL', 'getConnectedDataURL', 'getModel', 
            'getViewOfComponentModel', 'getViewOfSeriesModel', 'clear', 
            'dispose', 'isDisposed', 'showLoading', 'hideLoading', 
            'getDom', 'getZr', 'getWidth', 'getHeight', 'getRenderedCanvas',
            'getDevicePixelRatio', 'group', 'connect', 'disconnect',
            'registerMap', 'getMap', 'registerTheme', 'graphic', 'registerPreprocessor',
            
            // M√©thodes statiques
            'registerTheme', 'registerMap', 'getMap', 'registerPreprocessor',
            'registerPostInit', 'registerAction', 'registerCoordinateSystem',
            'registerLayout', 'registerVisual', 'registerTransform',
            'registerComponent', 'registerComponentModel', 'registerComponentView',
            'registerSeries', 'registerSeriesModel', 'registerSeriesView',
            'registerChart', 'registerProcessor', 'registerUpdateLifecycle',
            'registerLoading', 'connect', 'disconnect', 'disconnect', 'extendComponentModel',
            'extendComponentView', 'extendSeriesModel', 'extendSeriesView',
            'parseJSON', 'getInstanceByDom', 'getAll', 'dispose',
            
            // M√©thodes de composants graphiques
            'getBoundingRect', 'contain', 'setStyle', 'getStyle', 'setShape', 'getShape',
            'setClipPath', 'getClipPath', 'attr', 'getAnimation', 'stopAnimation',
            'animate', 'animateTo', 'animateFrom', 'traverse', 'remove',
            'add', 'insert', 'insertBefore', 'replace', 'replaceWith', 'getParent',
            'getChildCount', 'getChildAt', 'getChildByName', 'getChildByIndex',
            'eachChild', 'clone', 'isGroup', 'isImage', 'isText', 'isCircle', 'isSector',
            'isRing', 'isPolygon', 'isPolyline', 'isRect', 'isLine', 'isBezierCurve',
            'isArc', 'isCompoundPath', 'isIncremental', 'isPath'
        ];

        // Liste exhaustive de tous les modules/components ECharts
        const allEChartsModules = {
            // Composants principaux
            'title': ['text', 'subtext', 'left', 'top', 'right', 'bottom', 'backgroundColor', 'borderColor', 'borderWidth', 'padding', 'itemGap', 'textStyle', 'subtextStyle', 'borderRadius', 'shadowBlur', 'shadowColor', 'shadowOffsetX', 'shadowOffsetY'],
            'legend': ['type', 'show', 'zlevel', 'z', 'left', 'top', 'right', 'bottom', 'width', 'height', 'orient', 'align', 'padding', 'itemGap', 'itemWidth', 'itemHeight', 'symbolKeepAspect', 'formatter', 'selectedMode', 'inactiveColor', 'selected', 'textStyle', 'tooltip', 'icon', 'data'],
            'grid': ['show', 'zlevel', 'z', 'left', 'top', 'right', 'bottom', 'width', 'height', 'containLabel', 'backgroundColor', 'borderColor', 'borderWidth', 'shadowBlur', 'shadowColor', 'shadowOffsetX', 'shadowOffsetY'],
            'xAxis': ['type', 'show', 'gridIndex', 'position', 'offset', 'name', 'nameLocation', 'nameTextStyle', 'nameGap', 'nameRotate', 'inverse', 'boundaryGap', 'min', 'max', 'scale', 'splitNumber', 'minInterval', 'maxInterval', 'interval', 'logBase', 'silent', 'triggerEvent', 'axisLine', 'axisTick', 'axisLabel', 'splitLine', 'splitArea', 'data'],
            'yAxis': ['type', 'show', 'gridIndex', 'position', 'offset', 'name', 'nameLocation', 'nameTextStyle', 'nameGap', 'nameRotate', 'inverse', 'boundaryGap', 'min', 'max', 'scale', 'splitNumber', 'minInterval', 'maxInterval', 'interval', 'logBase', 'silent', 'triggerEvent', 'axisLine', 'axisTick', 'axisLabel', 'splitLine', 'splitArea', 'data'],
            'polar': ['zlevel', 'z', 'center', 'radius'],
            'radiusAxis': ['type', 'show', 'polarIndex', 'name', 'nameLocation', 'nameTextStyle', 'nameGap', 'min', 'max', 'scale', 'splitNumber', 'minInterval', 'maxInterval', 'interval', 'logBase', 'silent', 'triggerEvent', 'axisLine', 'axisTick', 'axisLabel', 'splitLine', 'splitArea'],
            'angleAxis': ['type', 'show', 'polarIndex', 'startAngle', 'clockwise', 'name', 'nameLocation', 'nameTextStyle', 'nameGap', 'min', 'max', 'scale', 'splitNumber', 'minInterval', 'maxInterval', 'interval', 'logBase', 'silent', 'triggerEvent', 'axisLine', 'axisTick', 'axisLabel', 'splitLine', 'splitArea'],
            'radar': ['zlevel', 'z', 'center', 'radius', 'startAngle', 'name', 'nameGap', 'splitNumber', 'shape', 'scale', 'silent', 'triggerEvent', 'axisLine', 'axisTick', 'axisLabel', 'splitLine', 'splitArea', 'indicator'],
            
            // Composants d'interaction
            'tooltip': ['show', 'trigger', 'axisPointer', 'showContent', 'alwaysShowContent', 'triggerOn', 'showDelay', 'hideDelay', 'enterable', 'confine', 'appendToBody', 'className', 'transitionDuration', 'formatter', 'backgroundColor', 'borderColor', 'borderWidth', 'padding', 'textStyle', 'extraCssText', 'position', 'order'],
            'axisPointer': ['show', 'type', 'snap', 'z', 'label', 'lineStyle', 'shadowStyle', 'triggerTooltip', 'value', 'status', 'handle', 'link'],
            'toolbox': ['show', 'orient', 'itemSize', 'itemGap', 'showTitle', 'feature', 'iconStyle', 'emphasis', 'zlevel', 'z', 'left', 'top', 'right', 'bottom', 'width', 'height'],
            'brush': ['toolbox', 'brushLink', 'seriesIndex', 'geoIndex', 'xAxisIndex', 'yAxisIndex', 'brushType', 'brushMode', 'transformable', 'brushStyle', 'throttleType', 'throttleDelay', 'removeOnClick', 'z'],
            'dataZoom': ['type', 'xAxisIndex', 'yAxisIndex', 'radiusAxisIndex', 'angleAxisIndex', 'filterMode', 'start', 'end', 'startValue', 'endValue', 'minSpan', 'maxSpan', 'minValueSpan', 'maxValueSpan', 'orient', 'zoomLock', 'throttle', 'show', 'realtime', 'backgroundColor', 'dataBackground', 'fillerColor', 'borderColor', 'handleIcon', 'handleSize', 'handleStyle', 'moveHandleIcon', 'moveHandleSize', 'moveHandleStyle', 'labelPrecision', 'labelFormatter', 'showDetail', 'showDataShadow', 'z', 'left', 'top', 'right', 'bottom'],
            'visualMap': ['type', 'min', 'max', 'range', 'calculable', 'realtime', 'inverse', 'precision', 'itemWidth', 'itemHeight', 'align', 'text', 'textGap', 'show', 'dimension', 'seriesIndex', 'hoverLink', 'inRange', 'outOfRange', 'controller', 'zlevel', 'z', 'left', 'top', 'right', 'bottom', 'orient', 'padding', 'backgroundColor', 'borderColor', 'borderWidth', 'color', 'textStyle', 'formatter'],
            
            // S√©ries de graphiques
            'line': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'polarIndex', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'showSymbol', 'showAllSymbol', 'hoverAnimation', 'legendHoverLink', 'stack', 'cursor', 'label', 'labelLayout', 'itemStyle', 'lineStyle', 'areaStyle', 'emphasis', 'blur', 'select', 'smooth', 'smoothMonotone', 'sampling', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'bar': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'polarIndex', 'roundCap', 'showBackground', 'backgroundStyle', 'label', 'labelLayout', 'itemStyle', 'emphasis', 'blur', 'select', 'stack', 'cursor', 'barWidth', 'barMaxWidth', 'barMinHeight', 'barGap', 'barCategoryGap', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'pie': ['name', 'legendHoverLink', 'hoverAnimation', 'hoverOffset', 'selectedMode', 'selectedOffset', 'clockwise', 'startAngle', 'minAngle', 'minShowLabelAngle', 'roseType', 'avoidLabelOverlap', 'stillShowZeroSum', 'cursor', 'label', 'labelLine', 'itemStyle', 'emphasis', 'blur', 'select', 'center', 'radius', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'scatter': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'polarIndex', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'cursor', 'label', 'labelLayout', 'itemStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'effectScatter': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'polarIndex', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'cursor', 'label', 'labelLayout', 'itemStyle', 'emphasis', 'blur', 'select', 'rippleEffect', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'radar': ['name', 'radarIndex', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'label', 'labelLayout', 'itemStyle', 'lineStyle', 'areaStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'tree': ['name', 'layout', 'edgeShape', 'edgeForkPosition', 'roam', 'expandAndCollapse', 'initialTreeDepth', 'label', 'leaves', 'itemStyle', 'lineStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'treemap': ['name', 'layout', 'roam', 'nodeClick', 'zoomToNodeRatio', 'levels', 'sort', 'visualDimension', 'visualMin', 'visualMax', 'colorMappingBy', 'visibleMin', 'childrenVisibleMin', 'label', 'upperLabel', 'itemStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'sunburst': ['name', 'nodeClick', 'roam', 'highlightPolicy', 'radius', 'sort', 'renderLabelForZeroData', 'label', 'itemStyle', 'emphasis', 'blur', 'select', 'levels', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'boxplot': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'hoverAnimation', 'legendHoverLink', 'layout', 'boxWidth', 'itemStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'candlestick': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'hoverAnimation', 'legendHoverLink', 'layout', 'barWidth', 'barMaxWidth', 'itemStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'heatmap': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'geoIndex', 'blurSize', 'minOpacity', 'maxOpacity', 'label', 'itemStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'map': ['name', 'map', 'roam', 'center', 'aspectScale', 'boundingCoords', 'zoom', 'scaleLimit', 'nameMap', 'nameProperty', 'mapValueCalculation', 'showLegendSymbol', 'label', 'itemStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'parallel': ['name', 'parallelIndex', 'parallelAxisIndex', 'inactiveOpacity', 'activeOpacity', 'smooth', 'realtime', 'label', 'lineStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'lines': ['name', 'coordinateSystem', 'polyline', 'effect', 'large', 'largeThreshold', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'lineStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'graph': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'polarIndex', 'geoIndex', 'calendarIndex', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'edgeSymbol', 'edgeSymbolSize', 'cursor', 'label', 'labelLayout', 'itemStyle', 'lineStyle', 'emphasis', 'blur', 'select', 'edgeLabel', 'circular', 'force', 'roam', 'expandAndCollapse', 'focusNodeAdjacency', 'layout', 'data', 'nodes', 'links', 'edges', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'sankey': ['name', 'nodeWidth', 'nodeGap', 'nodeAlign', 'layout', 'draggable', 'focusNodeAdjacency', 'levels', 'label', 'itemStyle', 'lineStyle', 'emphasis', 'blur', 'select', 'edgeLabel', 'data', 'nodes', 'links', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'funnel': ['name', 'min', 'max', 'minSize', 'maxSize', 'sort', 'orient', 'gap', 'funnelAlign', 'label', 'labelLine', 'itemStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'gauge': ['name', 'min', 'max', 'splitNumber', 'radius', 'startAngle', 'endAngle', 'clockwise', 'axisLine', 'progress', 'splitLine', 'axisTick', 'axisLabel', 'pointer', 'anchor', 'itemStyle', 'emphasis', 'blur', 'select', 'title', 'detail', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'pictorialBar': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'symbol', 'symbolSize', 'symbolRotate', 'symbolKeepAspect', 'symbolOffset', 'symbolRepeat', 'symbolRepeatDirection', 'symbolMargin', 'symbolPosition', 'symbolClip', 'symbolBoundingData', 'symbolPatternSize', 'barWidth', 'barMaxWidth', 'barMinHeight', 'barGap', 'barCategoryGap', 'label', 'labelLayout', 'itemStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'themeRiver': ['name', 'label', 'itemStyle', 'emphasis', 'blur', 'select', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip'],
            'custom': ['name', 'coordinateSystem', 'xAxisIndex', 'yAxisIndex', 'polarIndex', 'geoIndex', 'calendarIndex', 'renderItem', 'itemStyle', 'emphasis', 'blur', 'select', 'dimensions', 'encode', 'seriesLayoutBy', 'datasetIndex', 'data', 'markPoint', 'markLine', 'markArea', 'zlevel', 'z', 'silent', 'animation', 'animationThreshold', 'animationDuration', 'animationEasing', 'animationDelay', 'animationDurationUpdate', 'animationEasingUpdate', 'animationDelayUpdate', 'universalTransition', 'tooltip']
        };

        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('fileInput');
            const browseBtn = document.getElementById('browseBtn');
            const uploadArea = document.getElementById('uploadArea');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const resetBtn = document.getElementById('resetBtn');
            const resultsDiv = document.getElementById('results');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const fileListDiv = document.getElementById('fileList');
            const summaryStatsDiv = document.getElementById('summaryStats');
            const topFunctionsDiv = document.getElementById('topFunctions');
            const topModulesDiv = document.getElementById('topModules');
            const fileResultsDiv = document.getElementById('fileResults');
            const allFunctionsListDiv = document.getElementById('allFunctionsList');
            const allModulesListDiv = document.getElementById('allModulesList');
            const moduleUsageResultsDiv = document.getElementById('moduleUsageResults');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const fileSearchInput = document.getElementById('fileSearch');
            const functionSearchInput = document.getElementById('functionSearch');
            const moduleSearchInput = document.getElementById('moduleSearch');
            const moduleUsageSearchInput = document.getElementById('moduleUsageSearch');
            
            let selectedFiles = [];
            let analysisResults = null;
            
            // √âv√©nements
            browseBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleFileDrop);
            analyzeBtn.addEventListener('click', analyzeFiles);
            resetBtn.addEventListener('click', resetAnalysis);
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            fileSearchInput.addEventListener('input', filterFiles);
            functionSearchInput.addEventListener('input', filterFunctions);
            moduleSearchInput.addEventListener('input', filterModules);
            moduleUsageSearchInput.addEventListener('input', filterModuleUsage);
            
            function handleFileSelect(e) {
                const files = Array.from(e.target.files);
                addFiles(files);
            }
            
            function handleDragOver(e) {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            }
            
            function handleDragLeave(e) {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
            }
            
            function handleFileDrop(e) {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = Array.from(e.dataTransfer.files).filter(file => 
                    file.type === 'application/javascript' || file.name.endsWith('.js')
                );
                addFiles(files);
            }
            
            function addFiles(files) {
                selectedFiles = selectedFiles.concat(files);
                updateFileList();
            }
            
            function updateFileList() {
                if (selectedFiles.length === 0) {
                    fileListDiv.innerHTML = '<p>Aucun fichier s√©lectionn√©</p>';
                    return;
                }
                
                fileListDiv.innerHTML = `
                    <h3>Fichiers s√©lectionn√©s (${selectedFiles.length})</h3>
                    <ul>
                        ${selectedFiles.map(file => `<li>${file.name}</li>`).join('')}
                    </ul>
                `;
            }
            
            function analyzeFiles() {
                if (selectedFiles.length === 0) {
                    showError('Veuillez s√©lectionner au moins un fichier JavaScript.');
                    return;
                }
                
                // R√©initialiser les r√©sultats pr√©c√©dents
                resultsDiv.style.display = 'none';
                loadingIndicator.style.display = 'block';
                analyzeBtn.disabled = true;
                
                // Analyser chaque fichier
                analyzeAllFiles(selectedFiles);
            }
            
            function analyzeAllFiles(files) {
                const promises = [];
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    promises.push(analyzeFile(file));
                }
                
                Promise.all(promises).then(results => {
                    loadingIndicator.style.display = 'none';
                    analyzeBtn.disabled = false;
                    
                    analysisResults = processResults(results);
                    displayResults(analysisResults);
                    resultsDiv.style.display = 'block';
                }).catch(error => {
                    loadingIndicator.style.display = 'none';
                    analyzeBtn.disabled = false;
                    showError('Erreur lors de l\'analyse des fichiers: ' + error.message);
                });
            }
            
            function analyzeFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        try {
                            const content = e.target.result;
                            const foundFunctions = [];
                            const foundModules = [];
                            
                            // Rechercher toutes les fonctions ECharts dans le contenu
                            allEChartsFunctions.forEach(func => {
                                const patterns = [
                                    new RegExp(`\\.${func}\\(`, 'g'),
                                    new RegExp(`\\b${func}\\(`, 'g'),
                                    new RegExp(`\\[['"]${func}['"]\\]`, 'g'),
                                    new RegExp(`['"]${func}['"]`, 'g')
                                ];
                                
                                let count = 0;
                                for (const pattern of patterns) {
                                    const matches = content.match(pattern);
                                    if (matches) {
                                        count += matches.length;
                                    }
                                }
                                
                                if (count > 0) {
                                    foundFunctions.push({
                                        name: func,
                                        count: count
                                    });
                                }
                            });
                            
                            // Rechercher tous les modules ECharts dans le contenu
                            Object.keys(allEChartsModules).forEach(module => {
                                const patterns = [
                                    new RegExp(`['"]${module}['"]\\s*:`, 'g'),
                                    new RegExp(`type\\s*:\\s*['"]${module}['"]`, 'gi'),
                                    new RegExp(`\\b${module}\\b`, 'g')
                                ];
                                
                                let count = 0;
                                for (const pattern of patterns) {
                                    const matches = content.match(pattern);
                                    if (matches) {
                                        count += matches.length;
                                    }
                                }
                                
                                if (count > 0) {
                                    foundModules.push({
                                        name: module,
                                        count: count
                                    });
                                }
                            });
                            
                            resolve({
                                fileName: file.name,
                                functions: foundFunctions,
                                modules: foundModules,
                                fileSize: file.size
                            });
                        } catch (error) {
                            reject(error);
                        }
                    };
                    
                    reader.onerror = function() {
                        reject(new Error(`Erreur de lecture du fichier ${file.name}`));
                    };
                    
                    reader.readAsText(file);
                });
            }
            
            function processResults(results) {
                // Compter les fonctions globales
                const globalFunctionCounts = {};
                const globalModuleCounts = {};
                let totalFunctionsFound = 0;
                let totalModulesFound = 0;
                let totalFilesWithECharts = 0;
                
                results.forEach(result => {
                    if (result.functions.length > 0 || result.modules.length > 0) {
                        totalFilesWithECharts++;
                        totalFunctionsFound += result.functions.length;
                        totalModulesFound += result.modules.length;
                        
                        result.functions.forEach(func => {
                            if (!globalFunctionCounts[func.name]) {
                                globalFunctionCounts[func.name] = 0;
                            }
                            globalFunctionCounts[func.name] += func.count;
                        });
                        
                        result.modules.forEach(module => {
                            if (!globalModuleCounts[module.name]) {
                                globalModuleCounts[module.name] = 0;
                            }
                            globalModuleCounts[module.name] += module.count;
                        });
                    }
                });
                
                // Trier les fonctions par utilisation
                const sortedFunctions = Object.entries(globalFunctionCounts)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 10);
                
                // Trier les modules par utilisation
                const sortedModules = Object.entries(globalModuleCounts)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 10);
                
                // Identifier les fonctions non utilis√©es
                const unusedFunctions = allEChartsFunctions.filter(func => 
                    !globalFunctionCounts[func]
                );
                
                // Identifier les modules non utilis√©s
                const unusedModules = Object.keys(allEChartsModules).filter(module => 
                    !globalModuleCounts[module]
                );
                
                return {
                    fileResults: results,
                    globalFunctionCounts,
                    globalModuleCounts,
                    totalFunctionsFound,
                    totalModulesFound,
                    totalFilesWithECharts,
                    sortedFunctions,
                    sortedModules,
                    unusedFunctions,
                    unusedModules,
                    totalFiles: results.length
                };
            }
            
            function displayResults(results) {
                displaySummary(results);
                displayFileResults(results.fileResults);
                displayAllFunctions(results.globalFunctionCounts);
                displayAllModules(results.globalModuleCounts);
                displayModuleUsage(results);
            }
            
            function displaySummary(results) {
                const { totalFiles, totalFilesWithECharts, totalFunctionsFound, totalModulesFound, sortedFunctions, sortedModules } = results;
                
                summaryStatsDiv.innerHTML = `
                    <div class="stat">
                        <div class="stat-value">${totalFiles}</div>
                        <div class="stat-label">Fichiers analys√©s</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${totalFilesWithECharts}</div>
                        <div class="stat-label">Fichiers avec ECharts</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${totalFunctionsFound}</div>
                        <div class="stat-label">Fonctions trouv√©es</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${totalModulesFound}</div>
                        <div class="stat-label">Modules trouv√©s</div>
                    </div>
                `;
                
                if (sortedFunctions.length > 0) {
                    topFunctionsDiv.innerHTML = `
                        <div class="function-list">
                            ${sortedFunctions.map(([func, count]) => `
                                <div class="function-item used">
                                    ${func} (${count} utilisation${count > 1 ? 's' : ''})
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    topFunctionsDiv.innerHTML = '<p>Aucune fonction ECharts trouv√©e</p>';
                }
                
                if (sortedModules.length > 0) {
                    topModulesDiv.innerHTML = `
                        <div class="module-list">
                            ${sortedModules.map(([module, count]) => `
                                <div class="module-item used">
                                    ${module} (${count} utilisation${count > 1 ? 's' : ''})
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    topModulesDiv.innerHTML = '<p>Aucun module ECharts trouv√©</p>';
                }
            }
            
            function displayFileResults(fileResults) {
                fileResultsDiv.innerHTML = '';
                
                fileResults.forEach(result => {
                    if (result.functions.length === 0 && result.modules.length === 0) return;
                    
                    const fileResult = document.createElement('div');
                    fileResult.className = 'file-result';
                    fileResult.setAttribute('data-filename', result.fileName);
                    
                    const functionsCount = result.functions.length;
                    const modulesCount = result.modules.length;
                    
                    fileResult.innerHTML = `
                        <div class="file-header">
                            <div class="file-name">${result.fileName}</div>
                            <div>
                                ${functionsCount > 0 ? `<span class="function-count">${functionsCount} fonction(s)</span>` : ''}
                                ${modulesCount > 0 ? `<span class="module-count">${modulesCount} module(s)</span>` : ''}
                            </div>
                        </div>
                        ${functionsCount > 0 ? `
                            <h4 class="section-title">Fonctions utilis√©es:</h4>
                            <div class="function-list">
                                ${result.functions.map(func => `
                                    <div class="function-item used">
                                        ${func.name} (${func.count} utilisation${func.count > 1 ? 's' : ''})
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                        ${modulesCount > 0 ? `
                            <h4 class="section-title">Modules utilis√©s:</h4>
                            <div class="module-list">
                                ${result.modules.map(module => `
                                    <div class="module-item used">
                                        ${module.name} (${module.count} utilisation${module.count > 1 ? 's' : ''})
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    `;
                    
                    fileResultsDiv.appendChild(fileResult);
                });
                
                if (fileResultsDiv.children.length === 0) {
                    fileResultsDiv.innerHTML = '<p>Aucun fichier ne contient de fonctions ou modules ECharts</p>';
                }
            }
            
            function displayAllFunctions(globalFunctionCounts) {
                allFunctionsListDiv.innerHTML = '';
                
                allEChartsFunctions.forEach(func => {
                    const isUsed = globalFunctionCounts[func];
                    const count = isUsed ? globalFunctionCounts[func] : 0;
                    
                    const functionItem = document.createElement('div');
                    functionItem.className = `function-item ${isUsed ? 'used' : 'unused'}`;
                    functionItem.setAttribute('data-function', func);
                    
                    if (isUsed) {
                        functionItem.textContent = `${func} (${count} utilisation${count > 1 ? 's' : ''})`;
                    } else {
                        functionItem.textContent = `${func} (non utilis√©e)`;
                    }
                    
                    allFunctionsListDiv.appendChild(functionItem);
                });
            }
            
            function displayAllModules(globalModuleCounts) {
                allModulesListDiv.innerHTML = '';
                
                Object.keys(allEChartsModules).forEach(module => {
                    const isUsed = globalModuleCounts[module];
                    const count = isUsed ? globalModuleCounts[module] : 0;
                    
                    const moduleItem = document.createElement('div');
                    moduleItem.className = `module-item ${isUsed ? 'used' : 'unused'}`;
                    moduleItem.setAttribute('data-module', module);
                    
                    if (isUsed) {
                        moduleItem.textContent = `${module} (${count} utilisation${count > 1 ? 's' : ''})`;
                    } else {
                        moduleItem.textContent = `${module} (non utilis√©)`;
                    }
                    
                    allModulesListDiv.appendChild(moduleItem);
                });
            }
            
            function displayModuleUsage(results) {
                moduleUsageResultsDiv.innerHTML = '';
                
                const { globalModuleCounts } = results;
                
                Object.keys(allEChartsModules)
                    .filter(module => globalModuleCounts[module])
                    .sort((a, b) => globalModuleCounts[b] - globalModuleCounts[a])
                    .forEach(module => {
                        const moduleCard = document.createElement('div');
                        moduleCard.className = 'module-card';
                        moduleCard.setAttribute('data-module', module);
                        
                        const properties = allEChartsModules[module];
                        const count = globalModuleCounts[module];
                        
                        moduleCard.innerHTML = `
                            <div class="module-header">
                                <div class="module-name">${module}</div>
                                <div class="module-count">${count} utilisation${count > 1 ? 's' : ''}</div>
                            </div>
                            <div class="module-properties">
                                <strong>Propri√©t√©s disponibles:</strong>
                                <div style="margin-top: 8px; font-size: 0.9rem; color: #666;">
                                    ${properties.slice(0, 10).join(', ')}${properties.length > 10 ? `... et ${properties.length - 10} autres` : ''}
                                </div>
                            </div>
                        `;
                        
                        moduleUsageResultsDiv.appendChild(moduleCard);
                    });
                
                if (moduleUsageResultsDiv.children.length === 0) {
                    moduleUsageResultsDiv.innerHTML = '<p>Aucun module ECharts utilis√©</p>';
                }
            }
            
            function filterFiles() {
                const searchTerm = fileSearchInput.value.toLowerCase();
                const fileResults = document.querySelectorAll('.file-result');
                
                fileResults.forEach(result => {
                    const fileName = result.getAttribute('data-filename').toLowerCase();
                    if (fileName.includes(searchTerm)) {
                        result.style.display = 'block';
                    } else {
                        result.style.display = 'none';
                    }
                });
            }
            
            function filterFunctions() {
                const searchTerm = functionSearchInput.value.toLowerCase();
                const functionItems = document.querySelectorAll('#allFunctionsList .function-item');
                
                functionItems.forEach(item => {
                    const functionName = item.getAttribute('data-function').toLowerCase();
                    if (functionName.includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
            
            function filterModules() {
                const searchTerm = moduleSearchInput.value.toLowerCase();
                const moduleItems = document.querySelectorAll('#allModulesList .module-item');
                
                moduleItems.forEach(item => {
                    const moduleName = item.getAttribute('data-module').toLowerCase();
                    if (moduleName.includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
            
            function filterModuleUsage() {
                const searchTerm = moduleUsageSearchInput.value.toLowerCase();
                const moduleCards = document.querySelectorAll('#module-usage-tab .module-card');
                
                moduleCards.forEach(card => {
                    const moduleName = card.getAttribute('data-module').toLowerCase();
                    if (moduleName.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }
            
            function switchTab(tabId) {
                // D√©sactiver tous les onglets
                tabs.forEach(tab => tab.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Activer l'onglet s√©lectionn√©
                document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            }
            
            function resetAnalysis() {
                selectedFiles = [];
                fileInput.value = '';
                updateFileList();
                resultsDiv.style.display = 'none';
                analysisResults = null;
            }
            
            function showError(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error';
                errorDiv.textContent = message;
                resultsDiv.appendChild(errorDiv);
            }
            
            // Initialisation
            updateFileList();
        });
    </script>
</body>
</html>
